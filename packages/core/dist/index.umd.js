(function(r,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("vue"),require("@vueuse/core"),require("uuid")):typeof define=="function"&&define.amd?define(["exports","vue","@vueuse/core","uuid"],n):(r=typeof globalThis<"u"?globalThis:r||self,n(r.core={},r.Vue,r["@vueuse/core"],r.uuid))})(this,(function(r,n,P,h){"use strict";var a=(e=>(e.VARIABLE="VARIABLE",e.VALUE="VALUE",e.REF="REF",e))(a||{});const[R,V]=P.createInjectionState(e=>{const t={},o={},l={};return e.variables.forEach(s=>{t[s.id]=n.ref(s.value)}),e.actions.forEach(s=>{o[s.id]=(...f)=>{const i=[];return s.params.forEach(u=>{u.type===a.REF?i.push(f[u.value]):u.type===a.VALUE?i.push(u.value):i.push(null)}),s.handle(i,{variables:t})}}),{playground:e,refs:l,variables:t,actions:o}}),C=n.defineComponent({__name:"root",props:{playground:{type:Object,required:!0}},setup(e){return R(e.playground),(o,l)=>n.renderSlot(o.$slots,"default")}});var A=(e=>(e.COMPONENT="COMPONENT",e.CONTAINER="CONTAINER",e))(A||{}),y=(e=>(e.PROP="PROP",e.EVENT="EVENT",e))(y||{}),E=(e=>(e.VARIABLE="VARIABLE",e.VALUE="VALUE",e))(E||{});const _=n.defineComponent(e=>{const{variables:t,actions:o,refs:l}=V(),s=n.defineAsyncComponent(()=>e.component.getComponent()),f=e.component.getProps();return l[e.component.id]=n.ref(),()=>{const i={ref:e.component.id};Object.entries(f).forEach(([m,c])=>{c.type===y.PROP?c.value.type===E.VARIABLE?i[m]=t[c.value.value.id].value:c.value.type===E.VALUE&&(i[m]=c.value.value):c.type===y.EVENT&&(i[m]=(...p)=>{Array.isArray(c.value)?c.value.reduce(async(O,d)=>{if(O)O.then(()=>{if(d.async)return o[d.id](...p);o[d.id](...p)});else{if(d.async)return o[d.id](...p);o[d.id](...p)}},null):o[c.value.id](...p)})});const u={};return Object.entries(e.component.slots).forEach(([m,c])=>{u[m]=()=>c.map(p=>n.h(_,{component:p}))}),n.h(s,i,u)}},{props:{component:{type:Object,required:!0}}}),N=n.defineComponent(e=>()=>e.playground.containers.map(t=>n.h(_,{component:t})),{props:{playground:{type:Object,required:!0}}}),b=n.defineComponent({__name:"wrapper",setup(e){const{playground:t}=V();return(o,l)=>(n.openBlock(),n.createBlock(n.unref(N),{playground:n.unref(t)},null,8,["playground"]))}}),g=n.defineComponent({__name:"index",props:{playground:{type:Object,required:!0}},setup(e){return(t,o)=>(n.openBlock(),n.createBlock(C,{playground:e.playground},{default:n.withCtx(()=>[n.createVNode(b)]),_:1},8,["playground"]))}});class L{containers=[];variables=[];actions=[]}class B{getComponent(){throw new Error("Method not implemented.")}getProps(){return this.props}id=h.v4();type=A.COMPONENT;props={};name="component";ref;slots={}}class T{id=h.v4();name;value;constructor(t,o){this.name=t,this.value=o}}class j{id=h.v4();name;params=[];returnVariable;async=!1;constructor(t){this.name=t}transformParams(t,o){return this.params.map((s,f)=>{if(s.type===a.REF)return t[f];if(s.type===a.VALUE)return s.value;if(s.type===a.VARIABLE)return o.variables[s.value.id].value})}handle(t,o){throw new Error("Method not implemented.")}}r.Action=j,r.Component=B,r.ComponentType=A,r.ParamType=a,r.Playground=L,r.PlaygroundRender=g,r.PropType=y,r.PropValueType=E,r.Variable=T,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})}));
